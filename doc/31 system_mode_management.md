# 系统工作模式管理

## 1. 工作模式定义
- **MODE_NORMAL**：正常工作模式，执行完整分拣流程（扫描物体直径、计算分类、控制出口分拣和上料器控制）
- **MODE_DIAGNOSE_ENCODER**：编码器诊断模式，实时显示编码器相位变化和位置数据
- **MODE_DIAGNOSE_SCANNER**：扫描仪诊断模式，实时显示传感器原始数据和物体计数
- **MODE_DIAGNOSE_OUTLET**：出口诊断模式，可单独测试每个出口舵机和上料器舵机的开关动作
- **MODE_DIAGNOSE_CONVEYOR**：传输线诊断模式，控制传输线运行状态
- **MODE_TEST**：系统测试模式，测试整体系统功能，包括各组件协同工作
- **MODE_TEST_RELOADER**：上料器测试模式（Feeder Test Mode），上料器舵机每5秒钟开关一次，持续15秒钟后关闭并保持5秒钟

## 2. 模式切换机制
- **切换触发**：通过SimpleHMI模块的主按钮实现模式循环切换
- **切换方式**：主按钮的单次短按（按下并释放）操作会将系统切换到下一个工作模式
- **循环逻辑**：当切换到最后一个模式（MODE_TEST_RELOADER）后，再次短按将回到第一个模式（MODE_NORMAL）
- **状态指示**：系统通过串口输出当前模式名称，LED现在只用于显示出口状态，不再用于模式指示
- **实现方式**：在main.cpp中使用switch-case结构实现不同模式的功能逻辑，根据当前模式变量执行相应的处理代码