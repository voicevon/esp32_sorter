# 类关系图更新计划

## 发现的缺失内容

### 1. Sorter类缺失的成员
- **TraySystem**：托盘系统实例
- **DiameterScanner**：直径扫描仪实例
- **reloaderServo**：上料器舵机实例
- **outlets[]**：8个出口数组
- **divergencePointIndices[]**：出口位置索引数组
- **多个状态标志位**：resetScannerFlag、processScanDataFlag、executeOutletsFlag、resetOutletsFlag、reloaderOpenFlag、reloaderCloseFlag
- **多个公共接口方法**：getLatestDiameter()、getTrayCount()、getSortingSpeedPerSecond()、getSortingSpeedPerMinute()、openReloader()、closeReloader()、setOutletState()、getOutletCount()、setScannerLogLevel()、getScannerObjectCount()、getScannerDiameter()、displayIOStatus()、displayRawDiameters()

### 2. Encoder类缺失的成员
- **lastCount**：上次计数值
- **positionChanged**：位置变化标志（volatile bool）
- **phaseCallbackContext**：回调上下文指针
- **phaseCallback**：回调函数指针

### 3. Outlet类缺失的成员
- **minDiameter**：最小直径值
- **maxDiameter**：最大直径值
- **preOpenState**：预开状态

### 4. SimpleHMI类缺失的成员
- **多个私有成员变量**：按钮状态、LED状态等

### 5. 缺失的类
- **OLED**：OLED显示类（包含encoder和sorter实例指针）
- **DiameterScanner**：直径扫描仪类
- **TraySystem**：托盘系统类

### 6. 关联关系
- **Sorter → Encoder**：使用单例模式获取
- **Sorter → TraySystem**：包含实例
- **Sorter → DiameterScanner**：包含实例
- **Sorter → Outlet[]**：包含8个实例
- **Sorter → reloaderServo**：包含实例
- **OLED → Encoder**：包含实例指针
- **OLED → Sorter**：包含实例指针

## 更新计划

1. **更新Sorter类框**：添加所有缺失的成员和方法
2. **更新Encoder类框**：添加所有缺失的成员
3. **更新Outlet类框**：添加所有缺失的成员
4. **更新SimpleHMI类框**：添加所有缺失的成员
5. **添加OLED类框**：添加OLED类及其关联关系
6. **添加DiameterScanner类框**：添加DiameterScanner类
7. **添加TraySystem类框**：添加TraySystem类
8. **更新关联关系**：添加所有缺失的关联关系箭头
9. **更新图例**：添加所有新增的类到图例